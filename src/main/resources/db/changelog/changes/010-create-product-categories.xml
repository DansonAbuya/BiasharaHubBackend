<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        https://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.20.xsd">

    <changeSet id="010-create-product-categories" author="biasharahub">
        <comment>Create product_categories table and seed default categories for frontend dropdown</comment>
        <sql><![CDATA[
            CREATE TABLE IF NOT EXISTS tenant_default.product_categories (
                category_id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
                name VARCHAR(100) NOT NULL UNIQUE,
                display_order INTEGER NOT NULL DEFAULT 0
            );
            CREATE INDEX IF NOT EXISTS idx_product_categories_display_order ON tenant_default.product_categories(display_order);

            INSERT INTO tenant_default.product_categories (category_id, name, display_order) VALUES
                (gen_random_uuid(), 'Electronics', 1),
                (gen_random_uuid(), 'Clothing & Apparel', 2),
                (gen_random_uuid(), 'Food & Beverages', 3),
                (gen_random_uuid(), 'Home & Garden', 4),
                (gen_random_uuid(), 'Health & Beauty', 5),
                (gen_random_uuid(), 'Sports & Outdoors', 6),
                (gen_random_uuid(), 'Books & Stationery', 7),
                (gen_random_uuid(), 'Toys & Games', 8),
                (gen_random_uuid(), 'Automotive', 9),
                (gen_random_uuid(), 'Other', 99)
            ON CONFLICT (name) DO NOTHING;
        ]]></sql>
    </changeSet>

</databaseChangeLog>
